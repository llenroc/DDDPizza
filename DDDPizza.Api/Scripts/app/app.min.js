!function(){"use strict";var t=function(){return function(t){return"TakeOut"===t?"Take Out":"InRestaurant"===t?"Dining In":"Delivery"===t?"Delivery":"Unspecified"}},e=function(){return function(t){var e="";return e+=t.size.name+", ",e+=t.bread.name+", ",e+=t.sauce.name+", ",e+=t.cheese.name+", ",t.topping.length>0&&t.topping.forEach(function(t){null!=t&&(e+=t.name+", ")}),e.substring(0,e.length-2)}},n=function(t){angular.extend(t,{allowHtml:!1,autoDismiss:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},maxOpened:0,messageClass:"toast-message",newestOnTop:!0,onHidden:null,onShown:null,positionClass:"toast-bottom-right",preventDuplicates:!1,preventOpenDuplicates:!1,progressBar:!1,tapToDismiss:!0,target:"body",templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})};n.$inject=["toastrConfig"];var s=function(t){t.debugInfoEnabled(!1)};s.$inject=["$compileProvider"];var i=function(t,e,n){e.state("view",{url:"/",templateUrl:"/Scripts/app/views/view.html"}).state("add",{url:"/add",templateUrl:"/Scripts/app/views/home.html"}),t.otherwise("/"),n.html5Mode({enabled:!0,requireBase:!1})};i.$inject=["$urlRouterProvider","$stateProvider","$locationProvider"],angular.module("dddPizza",["ngAnimate","ngSanitize","ui.router","toastr","ui.bootstrap"]).config(i).config(n).config(s).filter("pizzadetails",e).filter("servicetype",t)}();
!function(e){var r=["inventoryRepository","orderRepository","pizza","order","localStorage","toastr"],t=function(e,r,t,s,a,i){var o=this;o.userkey="orderToken",o.pizza=t,o.order=s,o.breads=[],o.services=[],o.tempOrder={},o.init=function(){e.getInventory().then(function(e){o.breads=e.breads,o.sauces=e.sauces,o.cheeses=e.cheeses,o.sizes=e.sizes,o.toppings=e.toppings}),r.getServiceOptions().then(function(e){o.services=e}),null==a.get(o.userkey)&&a.add(o.userkey,o.order),o.tempOrder=a.get(o.userkey)},o.getOrderSubTotal=function(){for(var e=0,r=0;r<o.tempOrder.pizzas.length;r++){var t=o.tempOrder.pizzas[r];e+=t.total}return o.tempOrder.subtotal=e,e},o.getOrderTotal=function(){return o.tempOrder.total=null!=o.tempOrder.serviceCharge?parseFloat(o.tempOrder.subtotal)+parseFloat(o.tempOrder.serviceCharge):parseFloat(o.tempOrder.subtotal),o.tempOrder.total},o.updateServiceCharge=function(){o.tempOrder.serviceCharge=parseFloat("Delivery"===o.tempOrder.serviceType?2:0)},o.updateTotal=function(){o.pizza.total=0,isNaN(o.pizza.size.price)||(o.pizza.total=parseFloat(o.pizza.size.price)),o.pizza.topping.forEach(function(e){null!==e&&(isNaN(e.price)||null==e.price||(o.pizza.total+=parseFloat(e.price)))})},o.copyPizza=function(e){var r=a.get(o.userkey);r.pizzas.push(e),a.add(o.userkey,r),i.success("Successful!","Pizza was copied!"),o.init()},o.removePizza=function(e){var r=a.get(o.userkey);r.pizzas.splice(e,1),a.add(o.userkey,r),i.success("Successful!","Pizza was removed!"),o.init()},o.submitPizza=function(e){var r=a.get(o.userkey);r.pizzas.push(o.pizza),a.add(o.userkey,r),i.success("Successful!","Pizza was added to Order!"),o.init()},o.submitFinalOrder=function(){e.placeOrder(o.tempOrder).then(function(e){console.log(e)})["catch"](function(e){console.log(e)})}};t.$inject=r,e.controller("homeController",t)}(angular.module("dddPizza"));
!function(n){var i=function(){var n=this;n.init=function(){}};n.controller("navigationController",i)}(angular.module("dddPizza"));
!function(a){var l=function(){var a=this;a.pizzas=[],a.value=0,a.maxValue=3};a.controller("pizzaController",l)}(angular.module("dddPizza"));
!function(r){var n=["orderRepository"],o=function(r){var n=this;n.orders=[],n.init=function(){r.getOrders().then(function(r){n.orders=r})}};o.$inject=n,r.controller("viewController",o)}(angular.module("dddPizza"));
!function(e){var t=["$http","$q"],r=function(e,t){var r=function(r){var n=t.defer();return e({method:"GET",url:r,contentType:"application/json; charset=utf-8"}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,r,o){n.reject(t)}),n.promise},n=function(r){var n=t.defer();return e({method:"DELETE",url:r,contentType:"application/json; charset=utf-8"}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,r,o){n.reject(t)}),n.promise},o=function(r,n){var o=t.defer();return e({method:"PATCH",url:r,data:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).success(function(e,t,r,n){o.resolve(e)}).error(function(e,t,r,n){o.reject(t)}),o.promise},c=function(r,n){var o=t.defer();return e({method:"POST",url:r,data:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).success(function(e,t,r,n){o.resolve(e)}).error(function(e,t,r,n){o.reject(t)}),o.promise};return{getData:r,postData:c,deleteData:n,patchData:o}};r.$inject=t,e.factory("httpRepository",r)}(angular.module("dddPizza"));
!function(e){var t=["httpRepository","$q"],n=function(e,t){var n=function(){var n=t.defer();return e.getData("/api/inventory").then(function(e){n.resolve(e)})["catch"](function(e){n.reject(e)}),n.promise},r=function(n){var r=t.defer();return e.postData("/api/order",n).then(function(e){r.resolve(e)})["catch"](function(e){r.reject(e)}),r.promise};return{getInventory:n,placeOrder:r}};n.$inject=t,e.service("inventoryRepository",n)}(angular.module("dddPizza"));
!function(n){var o=["$window"],t=function(n){var o=n.localStorage,t=function(n,t){t=angular.toJson(t),o.setItem(n,t)},a=function(n){var t=o.getItem(n);return t&&(t=angular.fromJson(t)),t},e=function(n){o.removeItem(n)};return{add:t,get:a,remove:e}};t.$inject=o,n.factory("localStorage",t)}(angular.module("dddPizza"));
!function(a){var e=function(){return{name:"",serviceType:"",subtotal:0,serviceCharge:0,total:0,pizzas:[]}};a.factory("order",e)}(angular.module("dddPizza"));
!function(e){var r=["httpRepository","$q"],t=function(e,r){var t=function(){var t=r.defer();return e.getData("/api/orders").then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)}),t.promise},n=function(t){var n=r.defer();return e.getData("/api/orders/"+t).then(function(e){n.resolve(e)})["catch"](function(e){n.reject(e)}),n.promise},o=function(){var t=r.defer();return e.getData("/api/services").then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)}),t.promise};return{getOrders:t,getOrderById:n,getServiceOptions:o}};t.$inject=r,e.service("orderRepository",t)}(angular.module("dddPizza"));
!function(a){var e=function(){return{bread:"",sauce:"",cheese:"",size:"",topping:[],total:0}};a.factory("pizza",e)}(angular.module("dddPizza"));
!function(t){var n=function(){return{restrict:"AE",require:"^form",bindToController:{amount:"@",passPizza:"=",updateAmount:"&"},templateUrl:"/Scripts/app/directives/templates/dynamicDDL.html",controllerAs:"vm",scope:!0,controller:["inventoryRepository",function(t){var n=this;t.getInventory().then(function(t){n.toppings=t.toppings}),n.add=function(){n.amount++},n.remove=function(){n.amount--,n.passPizza.topping.splice(-1,1),n.updateAmount()},n.range=function(t){for(var n=[],o=0;t>o;o++)n.push(o);return n}}]}};t.directive("dynamicdropdownlist",n)}(angular.module("dddPizza"));