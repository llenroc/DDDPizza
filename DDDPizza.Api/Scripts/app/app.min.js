!function(){"use strict";var t=function(){return function(t){return"TakeOut"===t?"Take Out":"InRestaurant"===t?"Dining In":"Delivery"===t?"Delivery":"Unspecified"}},e=function(){return function(t){var e="";return e+=t.size.name+", ",e+=t.bread.name+", ",e+=t.sauce.name+", ",e+=t.cheese.name+", ",t.topping.length>0&&t.topping.forEach(function(t){null!==t&&(e+=t.name+", ")}),e.substring(0,e.length-2)}},r=function(t){angular.extend(t,{allowHtml:!1,autoDismiss:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},maxOpened:0,messageClass:"toast-message",newestOnTop:!0,onHidden:null,onShown:null,positionClass:"toast-bottom-right",preventDuplicates:!1,preventOpenDuplicates:!1,progressBar:!1,tapToDismiss:!0,target:"body",templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})};r.$inject=["toastrConfig"];var n=function(t){t.debugInfoEnabled(!1)};n.$inject=["$compileProvider"];var s=function(t,e,r){e.state("current",{url:"/",templateUrl:"/Scripts/app/views/current.html"}).state("past",{url:"/past",templateUrl:"/Scripts/app/views/past.html"}).state("order",{url:"/order",templateUrl:"/Scripts/app/views/order.html"}),t.otherwise("/"),r.html5Mode({enabled:!0,requireBase:!1})};s.$inject=["$urlRouterProvider","$stateProvider","$locationProvider"],angular.module("dddPizza",["ngAnimate","ngSanitize","ui.router","toastr","ui.bootstrap","angular.filter"]).config(s).config(r).config(n).filter("pizzadetails",e).filter("servicetype",t)}();
!function(e){var t=["$timeout","orderRepository"],n=function(e,t){function n(){t.getOrders().then(function(t){r.orders=t,e(function(){n()},6e4)})}var r=this;r.orders=[],r.timeRemaining=function(e,t){var n=new Date(e),r=new Date(t),o=r.getTime()-n.getTime(),i=r.getTime()-(new Date).getTime();return o=i/o,o=100-Math.floor(100*o)},n()};n.$inject=t,e.controller("currentOrdersController",n)}(angular.module("dddPizza"));
!function(n){var i=function(){var n=this;n.init=function(){}};n.controller("navigationController",i)}(angular.module("dddPizza"));
!function(e){var r=["$state","inventoryRepository","orderRepository","pizza","order","localStorage","toastr"],t=function(e,r,t,s,a,i,o){var n=this;n.userkey="orderToken",n.pizza=s,n.order=a,n.breads=[],n.services=[],n.tempOrder={},n.init=function(){r.getInventory().then(function(e){n.breads=e.breads,n.sauces=e.sauces,n.cheeses=e.cheeses,n.sizes=e.sizes,n.toppings=e.toppings}),t.getServiceOptions().then(function(e){n.services=e}),null==i.get(n.userkey)&&i.add(n.userkey,n.order),n.tempOrder=i.get(n.userkey)},n.getOrderSubTotal=function(){for(var e=0,r=0;r<n.tempOrder.pizzas.length;r++){var t=n.tempOrder.pizzas[r];e+=t.total}return n.tempOrder.subtotal=e,e},n.getOrderTotal=function(){return n.tempOrder.total=null!=n.tempOrder.serviceCharge?parseFloat(n.tempOrder.subtotal)+parseFloat(n.tempOrder.serviceCharge):parseFloat(n.tempOrder.subtotal),n.tempOrder.total},n.updateServiceCharge=function(){n.tempOrder.serviceCharge=parseFloat("Delivery"===n.tempOrder.serviceType?2:0)},n.updateTotal=function(){n.pizza.total=0,isNaN(n.pizza.size.price)||(n.pizza.total=parseFloat(n.pizza.size.price)),n.pizza.topping.forEach(function(e){null!==e&&(isNaN(e.price)||null==e.price||(n.pizza.total+=parseFloat(e.price)))})},n.copyPizza=function(e){var r=i.get(n.userkey);r.pizzas.push(e),i.add(n.userkey,r),o.success("Successful!","Pizza was copied!"),n.init()},n.removePizza=function(e){var r=i.get(n.userkey);r.pizzas.splice(e,1),i.add(n.userkey,r),o.success("Successful!","Pizza was removed!"),n.init()},n.submitPizza=function(){var e=i.get(n.userkey);e.pizzas.push(n.pizza),i.add(n.userkey,e),o.success("Successful!","Pizza was added to Order!"),n.init()},n.submitFinalOrder=function(){t.placeOrder(n.tempOrder).then(function(r){console.log(r),o.success("Successful!","Order has been placed on the queue!"),e.go("current")})["catch"](function(e){console.log(e)})}};t.$inject=r,e.controller("orderController",t)}(angular.module("dddPizza"));
!function(r){var o=["orderRepository"],n=function(r){function o(){r.getPastOrders().then(function(r){n.orders=r})}var n=this;n.orders=[],o()};n.$inject=o,r.controller("pastOrdersController",n)}(angular.module("dddPizza"));
!function(a){var l=function(){var a=this;a.pizzas=[],a.value=0,a.maxValue=3};a.controller("pizzaController",l)}(angular.module("dddPizza"));
!function(e){var t=["$http","$q"],r=function(e,t){var r=function(r){var n=t.defer();return e({method:"GET",url:r,contentType:"application/json; charset=utf-8"}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,r,o){n.reject(t)}),n.promise},n=function(r){var n=t.defer();return e({method:"DELETE",url:r,contentType:"application/json; charset=utf-8"}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,r,o){n.reject(t)}),n.promise},o=function(r,n){var o=t.defer();return e({method:"PATCH",url:r,data:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).success(function(e,t,r,n){o.resolve(e)}).error(function(e,t,r,n){o.reject(t)}),o.promise},c=function(r,n){var o=t.defer();return e({method:"POST",url:r,data:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).success(function(e,t,r,n){o.resolve(e)}).error(function(e,t,r,n){o.reject(t)}),o.promise};return{getData:r,postData:c,deleteData:n,patchData:o}};r.$inject=t,e.factory("httpRepository",r)}(angular.module("dddPizza"));
!function(e){var n=["httpRepository","$q"],t=function(e,n){var t=function(){var t=n.defer();return e.getData("/api/inventory").then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)}),t.promise};return{getInventory:t}};t.$inject=n,e.service("inventoryRepository",t)}(angular.module("dddPizza"));
!function(n){var o=["$window"],t=function(n){var o=n.localStorage,t=function(n,t){t=angular.toJson(t),o.setItem(n,t)},a=function(n){var t=o.getItem(n);return t&&(t=angular.fromJson(t)),t},e=function(n){o.removeItem(n)};return{add:t,get:a,remove:e}};t.$inject=o,n.factory("localStorage",t)}(angular.module("dddPizza"));
!function(a){var e=function(){return{name:"",serviceType:"",subtotal:0,serviceCharge:0,total:0,pizzas:[]}};a.factory("order",e)}(angular.module("dddPizza"));
!function(e){var r=["httpRepository","$q"],t=function(e,r){var t=function(){var t=r.defer();return e.getData("/api/current/orders").then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)}),t.promise},n=function(){var t=r.defer();return e.getData("/api/past/orders").then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)}),t.promise},o=function(t){var n=r.defer();return e.getData("/api/orders/"+t).then(function(e){n.resolve(e)})["catch"](function(e){n.reject(e)}),n.promise},c=function(){var t=r.defer();return e.getData("/api/services").then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)}),t.promise},i=function(t){var n=r.defer();return e.postData("/api/order",t).then(function(e){n.resolve(e)})["catch"](function(e){n.reject(e)}),n.promise};return{getOrders:t,getPastOrders:n,getOrderById:o,getServiceOptions:c,placeOrder:i}};t.$inject=r,e.service("orderRepository",t)}(angular.module("dddPizza"));
!function(a){var e=function(){return{bread:"",sauce:"",cheese:"",size:"",topping:[],total:0}};a.factory("pizza",e)}(angular.module("dddPizza"));
!function(r){var e=["$q",function(r){var e=0,n=function(n){return e+=1,r.when(n)},t=function(n){return e-=1,r.reject(n)},u=function(n){return e-=1,r.when(n)},o=function(n){return e-=1,r.reject(n)},c=function(){return e};return{request:n,response:u,requestError:t,responseError:o,getRequestCount:c}}];r.factory("requestCounter",e),r.config(["$httpProvider",function(r){r.interceptors.push("requestCounter")}])}(angular.module("dddPizza"));
!function(t){var n=function(){return{restrict:"AE",require:"^form",bindToController:{amount:"@",passPizza:"=",updateAmount:"&"},templateUrl:"/Scripts/app/directives/templates/dynamicDDL.html",controllerAs:"vm",scope:!0,controller:["inventoryRepository",function(t){var n=this;t.getInventory().then(function(t){n.toppings=t.toppings}),n.add=function(){n.amount++},n.remove=function(){n.amount--,n.passPizza.topping.splice(-1,1),n.updateAmount()},n.range=function(t){for(var n=[],o=0;t>o;o++)n.push(o);return n}}]}};t.directive("dynamicdropdownlist",n)}(angular.module("dddPizza"));
!function(n){var t=["requestCounter",function(n){return{restrict:"EAC",transclude:!0,scope:{},template:"<ng-transclude ng-show='requestCount'></ng-transclude>",link:function(t){t.$watch(function(){return n.getRequestCount()},function(n){t.requestCount=n})}}}];n.directive("workSpinner",t)}(angular.module("dddPizza"));